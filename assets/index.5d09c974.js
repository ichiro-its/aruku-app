var Y=Object.defineProperty,H=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var I=(e,o,n)=>o in e?Y(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,E=(e,o)=>{for(var n in o||(o={}))Q.call(o,n)&&I(e,n,o[n]);if(v)for(var n of v(o))Z.call(o,n)&&I(e,n,o[n]);return e},b=(e,o)=>H(e,X(o));import{R as t,B,A as ee,T as te,a as O,b as M,N as L,r as g,L as J,s as A,P,G as f,S as ne,I as R,d as oe,c as ae,e as ie,f as re,g as le,h as se,i as ce,j as N,k as ue}from"./vendor.ed4606ec.js";const fe=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}};fe();function ge(){return t.createElement(B,{sx:{flexGrow:1}},t.createElement(ee,{position:"static"},t.createElement(te,null,t.createElement(O,{variant:"h6",component:"div",sx:{flexGrow:1}},"Aruku App"),t.createElement(M,{component:L,to:"/",style:({isActive:e})=>({fontWeight:e?900:"normal"}),color:"inherit"},"Walk Settings"),t.createElement(M,{component:L,to:"/init",style:({isActive:e})=>({fontWeight:e?900:"normal"}),color:"inherit"},"Init Settings"))))}const x={};x.web=require("grpc-web");const c={};c.aruku_interfaces={};c.aruku_interfaces.proto=require("./aruku_pb.js");c.aruku_interfaces.proto.ConfigClient=function(e,o,n){n||(n={}),n.format="text",this.client_=new x.web.GrpcWebClientBase(n),this.hostname_=e.replace(/\/+$/,"")};c.aruku_interfaces.proto.ConfigPromiseClient=function(e,o,n){n||(n={}),n.format="text",this.client_=new x.web.GrpcWebClientBase(n),this.hostname_=e.replace(/\/+$/,"")};const V=new x.web.MethodDescriptor("/aruku_interfaces.proto.Config/GetConfig",x.web.MethodType.UNARY,c.aruku_interfaces.proto.Empty,c.aruku_interfaces.proto.ConfigWalking,function(e){return e.serializeBinary()},c.aruku_interfaces.proto.ConfigWalking.deserializeBinary);c.aruku_interfaces.proto.ConfigClient.prototype.getConfig=function(e,o,n){return this.client_.rpcCall(this.hostname_+"/aruku_interfaces.proto.Config/GetConfig",e,o||{},V,n)};c.aruku_interfaces.proto.ConfigPromiseClient.prototype.getConfig=function(e,o){return this.client_.unaryCall(this.hostname_+"/aruku_interfaces.proto.Config/GetConfig",e,o||{},V)};const T=new x.web.MethodDescriptor("/aruku_interfaces.proto.Config/SaveConfig",x.web.MethodType.UNARY,c.aruku_interfaces.proto.ConfigWalking,c.aruku_interfaces.proto.Empty,function(e){return e.serializeBinary()},c.aruku_interfaces.proto.Empty.deserializeBinary);c.aruku_interfaces.proto.ConfigClient.prototype.saveConfig=function(e,o,n){return this.client_.rpcCall(this.hostname_+"/aruku_interfaces.proto.Config/SaveConfig",e,o||{},T,n)};c.aruku_interfaces.proto.ConfigPromiseClient.prototype.saveConfig=function(e,o){return this.client_.unaryCall(this.hostname_+"/aruku_interfaces.proto.Config/SaveConfig",e,o||{},T)};const z=new x.web.MethodDescriptor("/aruku_interfaces.proto.Config/PublishConfig",x.web.MethodType.UNARY,c.aruku_interfaces.proto.ConfigWalking,c.aruku_interfaces.proto.Empty,function(e){return e.serializeBinary()},c.aruku_interfaces.proto.Empty.deserializeBinary);c.aruku_interfaces.proto.ConfigClient.prototype.publishConfig=function(e,o,n){return this.client_.rpcCall(this.hostname_+"/aruku_interfaces.proto.Config/PublishConfig",e,o||{},z,n)};c.aruku_interfaces.proto.ConfigPromiseClient.prototype.publishConfig=function(e,o){return this.client_.unaryCall(this.hostname_+"/aruku_interfaces.proto.Config/PublishConfig",e,o||{},z)};const F=new x.web.MethodDescriptor("/aruku_interfaces.proto.Config/SetMainConfig",x.web.MethodType.UNARY,c.aruku_interfaces.proto.SetWalking,c.aruku_interfaces.proto.Empty,function(e){return e.serializeBinary()},c.aruku_interfaces.proto.Empty.deserializeBinary);c.aruku_interfaces.proto.ConfigClient.prototype.setMainConfig=function(e,o,n){return this.client_.rpcCall(this.hostname_+"/aruku_interfaces.proto.Config/SetMainConfig",e,o||{},F,n)};c.aruku_interfaces.proto.ConfigPromiseClient.prototype.setMainConfig=function(e,o){return this.client_.unaryCall(this.hostname_+"/aruku_interfaces.proto.Config/SetMainConfig",e,o||{},F)};var C=c.aruku_interfaces.proto;const w=g.exports.createContext();function K(){const{GRPC_WEB_API_URL:e,setPublished:o,setKinematicValue:n,setWalkingValue:l}=g.exports.useContext(w),a=new C.ConfigClient(e,null,null),i=new C.Empty,[s,h]=g.exports.useState(!1),_=()=>{h(!0),a.getConfig(i,{},(k,r)=>{if(k)console.log(`Unexpected error: code = ${k.code}, message = "${k.message}"`);else{const u=JSON.parse(r.array[0]),m=JSON.parse(r.array[1]);Object.keys(u).forEach(d=>{Object.entries(u[d]).forEach(([p,y])=>{console.log(typeof y),n(d,p,y)})}),Object.keys(m).forEach(d=>{Object.entries(m[d]).forEach(([p,y])=>{l(d,p,y)})})}}),o(!1),h(!1)};return t.createElement(J,{onClick:_,color:"warning",variant:"contained",sx:{margin:1,top:5},loading:s},"Reload")}function D(){const{GRPC_WEB_API_URL:e,kinematic:o,walking:n}=g.exports.useContext(w),l=new C.ConfigClient(e,null,null),a=new C.ConfigWalking,[i,s]=g.exports.useState(!1),h=()=>{s(!0),a.setJsonKinematic(JSON.stringify(o)),a.setJsonWalking(JSON.stringify(n)),l.saveConfig(a,{},_=>{_&&console.log(`Unexpected error: code = ${_.code}, message = "${_.message}"`)}),s(!1)};return t.createElement(J,{onClick:h,color:"primary",variant:"contained",sx:{margin:1,top:5},loading:i},"Save")}const pe=A(P)(({theme:e})=>b(E({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary})),_e=A(O)(({theme:e})=>({textAlign:"left",padding:e.spacing(1)})),$=A(O)(({theme:e})=>({textAlign:"center",padding:e.spacing(1)}));function q({name:e,value:o,type:n}){const{setMainValue:l,setWalkingValue:a}=g.exports.useContext(w);return t.createElement(pe,null,t.createElement(f,{container:!0,spacing:1},t.createElement(f,{item:!0,xs:6},t.createElement(_e,null,e==="enable"?"AUTO_BALANCE":e.toUpperCase())),t.createElement(f,{item:!0,xs:!0},t.createElement($,null," OFF ")),t.createElement(f,{item:!0,xs:!0},t.createElement(ne,{onChange:n==="main"?i=>{l(e,i.target.checked)}:i=>{a("balance",e,i.target.checked)},checked:o})),t.createElement(f,{item:!0,xs:!0},t.createElement($,null," ON "))))}const me=A(P)(({theme:e})=>b(E({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary})),de=A(O)(({theme:e})=>({textAlign:"left",padding:e.spacing(1),fontSize:"0.9rem"}));function S(e){const{name:o,keys:n,value:l,type:a}=e,{setMainValue:i,setWalkingValue:s,setKinematicValue:h}=g.exports.useContext(w);function _(r){let u;if(a==="main")u=r*10,i(n,l+u);else if(a==="walking"){switch(o){case"balance":u=r/10;break;case"pid":u=r*10;break;default:u=r;break}s(o,n,l+u)}else{switch(o){case"offset":switch(n){case"x_offset":case"y_offset":case"z_offset":u=r*10;break;default:u=r;break}break;case"ratio":switch(n){case"foot_height":case"period_time":u=r*10;break;default:u=r/10;break}break;default:u=r;break}h(o,n,l+u)}}function k(r){a==="main"?i(n,r):a==="walking"?s(o,n,r):h(o,n,r)}return t.createElement(me,null,t.createElement(f,{container:!0,spacing:1},t.createElement(f,{item:!0,xs:6},t.createElement(de,null,n.toUpperCase())),t.createElement(f,{item:!0,xs:1},t.createElement(R,{onClick:()=>_(-1)},t.createElement(oe,null))),t.createElement(f,{item:!0,xs:1},t.createElement(R,{onClick:()=>_(-.1)},t.createElement(ae,null))),t.createElement(f,{item:!0,xs:1.5},t.createElement(ie,{value:l,margin:"dense",type:"number",InputProps:{inputProps:{style:{textAlign:"center"}}},onChangeCapture:r=>{r.target.value===""?k(0):k(parseFloat(r.target.value))}})),t.createElement(f,{item:!0,xs:1},t.createElement(R,{onClick:()=>_(.1)},t.createElement(re,null))),t.createElement(f,{item:!0,xs:1},t.createElement(R,{onClick:()=>_(1)},t.createElement(le,null)))))}function he(){const{GRPC_WEB_API_URL:e,main:o}=g.exports.useContext(w),n=new C.ConfigClient(e,null,null),l=new C.SetWalking,a=()=>{l.setRun(o.start),l.setXMove(o.x),l.setYMove(o.y),l.setAMove(o.a),l.setAimOn(o.aim),n.setMainConfig(l,{},(i,s)=>{console.log(i?`Unexpected error: code = ${i.code}, message = "${i.message}"`:s)})};return g.exports.useEffect(()=>{a()},[o]),t.createElement("div",null,Object.keys(o).map(i=>typeof o[i]=="boolean"?t.createElement(q,{name:i,value:o[i],type:"main"}):t.createElement(S,{keys:i,value:o[i],type:"main"})))}const j=A(P)(({theme:e})=>b(E({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}));function ke(){const{GRPC_WEB_API_URL:e,walking:o,kinematic:n}=g.exports.useContext(w),l=()=>{const a=new C.ConfigClient(e,null,null),i=new C.ConfigWalking;i.setJsonKinematic(JSON.stringify(n)),i.setJsonWalking(JSON.stringify(o)),a.publishConfig(i,{},(s,h)=>{console.log(s?`Unexpected error: code = ${s.code}, message = "${s.message}"`:h)})};return g.exports.useEffect(()=>{l()},[o,n]),t.createElement(f,{container:!0,xs:12,md:10,lg:8},t.createElement(f,{item:!0,xs:12,md:10,lg:6,style:{marginTop:8}},t.createElement(j,null,Object.keys(n.ratio).slice(1,12).map(a=>t.createElement(S,{name:"ratio",keys:a,value:n.ratio[a],type:"kinematic"})))),t.createElement(f,{item:!0,xs:12,md:10,lg:6,style:{marginTop:8}},t.createElement(j,null,t.createElement(S,{name:"ratio",keys:"foot_accel_ratio",value:n.ratio.foot_accel_ratio,type:"kinematic"}),Object.keys(n.offset).map(a=>t.createElement(S,{name:"offset",keys:a,value:n.offset[a],type:"kinematic"})),Object.keys(o.odometry).map(a=>t.createElement(S,{name:"odometry",keys:a,value:o.odometry[a],type:"walking"})))))}const U=A(P)(({theme:e})=>b(E({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}));function ye(){const{GRPC_WEB_API_URL:e,published:o,walking:n,kinematic:l,setPublished:a,setKinematicValue:i,setWalkingValue:s}=g.exports.useContext(w),h=new C.ConfigClient(e,null,null),_=new C.Empty,k=()=>{h.getConfig(_,{},(r,u)=>{if(r)console.log(`Unexpected error: code = ${r.code}, message = "${r.message}"`);else{const m=JSON.parse(u.array[0]),d=JSON.parse(u.array[1]);Object.keys(m).forEach(p=>{Object.entries(m[p]).forEach(([y,W])=>{console.log(typeof W),i(p,y,W)})}),Object.keys(d).forEach(p=>{Object.entries(d[p]).forEach(([y,W])=>{s(p,y,W)})})}})};return g.exports.useEffect(()=>{o||(k(),a(!0))},[]),t.createElement(B,{sx:{flexGrow:1}},t.createElement(U,{onLoad:k},t.createElement(f,{container:!0,spacing:1},t.createElement(f,{item:!0,xs:12,md:8,lg:4},t.createElement(U,null,t.createElement(he,null),Object.keys(n.balance).map(r=>typeof n.balance[r]=="boolean"?t.createElement(q,{name:r,value:n.balance[r],type:"walking"}):t.createElement(S,{name:"balance",keys:r,value:n.balance[r],type:"walking"})),t.createElement(S,{name:"ratio",keys:"forward_hip_comp_ratio",value:l.ratio.forward_hip_comp_ratio,type:"kinematic"}))),t.createElement(ke,null)),t.createElement(f,{container:!0,style:{justifyContent:"end"}},t.createElement(D,null),t.createElement(K,null))))}const G=A(P)(({theme:e})=>b(E({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}));function Ce(){const{GRPC_WEB_API_URL:e,kinematic:o,walking:n}=g.exports.useContext(w),l=()=>{const a=new C.ConfigClient(e,null,null),i=new C.ConfigWalking;i.setJsonKinematic(JSON.stringify(o)),i.setJsonWalking(JSON.stringify(n)),a.publishConfig(i,{},s=>{s&&console.log(`Unexpected error: code = ${s.code}, message = "${s.message}"`)})};return g.exports.useEffect(()=>{l()},[n]),t.createElement(f,{container:!0,spacing:2},t.createElement(f,{item:!0,xs:12,md:6},t.createElement(G,null,t.createElement(O,{variant:"h6",component:"div",sx:{padding:1}},"Left Foot"),Object.keys(n.init_angles).slice(0,9).map(a=>t.createElement(S,{name:"init_angles",keys:a,value:n.init_angles[a],type:"walking"})))),t.createElement(f,{item:!0,xs:12,md:6},t.createElement(G,null,t.createElement(O,{variant:"h6",component:"div",sx:{padding:1}},"Right Foot"),Object.keys(n.init_angles).slice(9,18).map(a=>t.createElement(S,{name:"init_angles",keys:a,value:n.init_angles[a],type:"walking"})))))}A(P)(({theme:e})=>b(E({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}));function Ee(){const{GRPC_WEB_API_URL:e,published:o,setPublished:n,setKinematicValue:l,setWalkingValue:a}=g.exports.useContext(w),i=new C.ConfigClient(e,null,null),s=new C.Empty,h=()=>{i.getConfig(s,{},(_,k)=>{if(_)console.log(`Unexpected error: code = ${_.code}, message = "${_.message}"`);else{const r=JSON.parse(k.array[0]),u=JSON.parse(k.array[1]);Object.keys(r).forEach(m=>{Object.entries(r[m]).forEach(([d,p])=>{console.log(typeof p),l(m,d,p)})}),Object.keys(u).forEach(m=>{Object.entries(u[m]).forEach(([d,p])=>{a(m,d,p)})})}})};return g.exports.useEffect(()=>{o||(h(),n(!0))},[]),t.createElement(B,{sx:{flexGrow:1}},t.createElement(Ce,null),t.createElement(f,{container:!0,style:{justifyContent:"end"}},t.createElement(D,null),t.createElement(K,null)))}function be(){const e={}.VITE_GRPC_WEB_API_URL,[o,n]=g.exports.useState(!1),[l,a]=g.exports.useState({start:!1,x:0,y:0,a:0,aim:!1}),[i,s]=g.exports.useState({ratio:{forward_hip_comp_ratio:0,dsp_comp_ratio:0,period_time:0,swing_right_left:0,dsp_ratio:0,period_comp_ratio:0,swing_up_down:0,arm_swing_gain:0,backward_hip_comp_ratio:0,foot_comp_ratio:0,foot_height:0,move_accel_ratio:0,foot_accel_ratio:0},offset:{y_offset:0,roll_offset:0,hip_pitch_offset:0,pitch_offset:0,yaw_offset:0,z_offset:0,x_offset:0},length:{leg_length:0,thigh_length:0,calf_length:0,ankle_length:0}}),[h,_]=g.exports.useState({balance:{enable:!1,balance_knee_gain:0,balance_ankle_pitch_gain:0,balance_hip_roll_gain:0,balance_ankle_roll_gain:0},pid:{p_gain:10,i_gain:2,d_gain:3},odometry:{ry_coefficient:0,fx_coefficient:0,ly_coefficient:0},init_angles:{left_shoulder_pitch:0,left_shoulder_roll:0,left_elbow:0,left_hip_yaw:0,left_hip_roll:0,left_hip_pitch:0,left_knee:0,left_ankle_roll:0,left_ankle_pitch:0,right_shoulder_pitch:0,right_shoulder_roll:0,right_elbow:0,right_hip_yaw:0,right_hip_roll:0,right_hip_pitch:0,right_knee:0,right_ankle_roll:0,right_ankle_pitch:0},angles_direction:{left_shoulder_pitch:-1,left_shoulder_roll:-1,left_elbow:-1,right_shoulder_pitch:1,right_shoulder_roll:1,right_elbow:1,left_hip_yaw:-1,left_hip_roll:-1,left_hip_pitch:-1,left_knee:-1,left_ankle_roll:1,left_ankle_pitch:1,right_hip_yaw:-1,right_hip_roll:-1,right_hip_pitch:1,right_knee:1,right_ankle_roll:1,right_ankle_pitch:-1},length:{thigh_length:0,calf_length:0,ankle_length:0,leg_length:0}}),k=(m,d)=>{a(p=>b(E({},p),{[m]:d}))},r=(m,d,p)=>{_(y=>b(E({},y),{[m]:b(E({},y[m]),{[d]:p})}))},u=(m,d,p)=>{s(y=>b(E({},y),{[m]:b(E({},y[m]),{[d]:p})}))};return t.createElement(w.Provider,{value:{GRPC_WEB_API_URL:e,published:o,main:l,walking:h,kinematic:i,setPublished:n,setKinematic:s,setMain:a,setWalking:_,setMainValue:k,setWalkingValue:r,setKinematicValue:u}},t.createElement(se,null,t.createElement(ge,null),t.createElement(ce,null,t.createElement(N,{path:"/",element:t.createElement(ye,null)}),t.createElement(N,{path:"/init",element:t.createElement(Ee,null)}))))}ue.render(t.createElement(t.StrictMode,null,t.createElement(be,null)),document.getElementById("root"));
