var q=Object.defineProperty,Y=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var I=(e,a,n)=>a in e?q(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,h=(e,a)=>{for(var n in a||(a={}))X.call(a,n)&&I(e,n,a[n]);if(B)for(var n of B(a))Q.call(a,n)&&I(e,n,a[n]);return e},k=(e,a)=>Y(e,H(a));import{R as t,B as v,A as Z,T as ee,a as w,b as O,N as M,r as f,L as J,s as x,P as S,G as u,S as te,I as R,d as ne,c as ae,e as oe,f as ie,g as re,h as le,i as se,j as L,k as ce}from"./vendor.ed4606ec.js";const ue=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};ue();function fe(){return t.createElement(v,{sx:{flexGrow:1}},t.createElement(Z,{position:"static"},t.createElement(ee,null,t.createElement(w,{variant:"h6",component:"div",sx:{flexGrow:1}},"Aruku App"),t.createElement(O,{component:M,to:"/",style:({isActive:e})=>({fontWeight:e?900:"normal"}),color:"inherit"},"Walk Settings"),t.createElement(O,{component:M,to:"/init",style:({isActive:e})=>({fontWeight:e?900:"normal"}),color:"inherit"},"Init Settings"))))}const C={};C.web=require("grpc-web");const c={};c.aruku_interfaces={};c.aruku_interfaces.proto=require("./aruku_pb.js");c.aruku_interfaces.proto.ConfigClient=function(e,a,n){n||(n={}),n.format="text",this.client_=new C.web.GrpcWebClientBase(n),this.hostname_=e.replace(/\/+$/,"")};c.aruku_interfaces.proto.ConfigPromiseClient=function(e,a,n){n||(n={}),n.format="text",this.client_=new C.web.GrpcWebClientBase(n),this.hostname_=e.replace(/\/+$/,"")};const T=new C.web.MethodDescriptor("/aruku_interfaces.proto.Config/GetConfig",C.web.MethodType.UNARY,c.aruku_interfaces.proto.Empty,c.aruku_interfaces.proto.ConfigWalking,function(e){return e.serializeBinary()},c.aruku_interfaces.proto.ConfigWalking.deserializeBinary);c.aruku_interfaces.proto.ConfigClient.prototype.getConfig=function(e,a,n){return this.client_.rpcCall(this.hostname_+"/aruku_interfaces.proto.Config/GetConfig",e,a||{},T,n)};c.aruku_interfaces.proto.ConfigPromiseClient.prototype.getConfig=function(e,a){return this.client_.unaryCall(this.hostname_+"/aruku_interfaces.proto.Config/GetConfig",e,a||{},T)};const V=new C.web.MethodDescriptor("/aruku_interfaces.proto.Config/SaveConfig",C.web.MethodType.UNARY,c.aruku_interfaces.proto.ConfigWalking,c.aruku_interfaces.proto.Empty,function(e){return e.serializeBinary()},c.aruku_interfaces.proto.Empty.deserializeBinary);c.aruku_interfaces.proto.ConfigClient.prototype.saveConfig=function(e,a,n){return this.client_.rpcCall(this.hostname_+"/aruku_interfaces.proto.Config/SaveConfig",e,a||{},V,n)};c.aruku_interfaces.proto.ConfigPromiseClient.prototype.saveConfig=function(e,a){return this.client_.unaryCall(this.hostname_+"/aruku_interfaces.proto.Config/SaveConfig",e,a||{},V)};const j=new C.web.MethodDescriptor("/aruku_interfaces.proto.Config/PublishConfig",C.web.MethodType.UNARY,c.aruku_interfaces.proto.ConfigWalking,c.aruku_interfaces.proto.Empty,function(e){return e.serializeBinary()},c.aruku_interfaces.proto.Empty.deserializeBinary);c.aruku_interfaces.proto.ConfigClient.prototype.publishConfig=function(e,a,n){return this.client_.rpcCall(this.hostname_+"/aruku_interfaces.proto.Config/PublishConfig",e,a||{},j,n)};c.aruku_interfaces.proto.ConfigPromiseClient.prototype.publishConfig=function(e,a){return this.client_.unaryCall(this.hostname_+"/aruku_interfaces.proto.Config/PublishConfig",e,a||{},j)};const z=new C.web.MethodDescriptor("/aruku_interfaces.proto.Config/SetMainConfig",C.web.MethodType.UNARY,c.aruku_interfaces.proto.SetWalking,c.aruku_interfaces.proto.Empty,function(e){return e.serializeBinary()},c.aruku_interfaces.proto.Empty.deserializeBinary);c.aruku_interfaces.proto.ConfigClient.prototype.setMainConfig=function(e,a,n){return this.client_.rpcCall(this.hostname_+"/aruku_interfaces.proto.Config/SetMainConfig",e,a||{},z,n)};c.aruku_interfaces.proto.ConfigPromiseClient.prototype.setMainConfig=function(e,a){return this.client_.unaryCall(this.hostname_+"/aruku_interfaces.proto.Config/SetMainConfig",e,a||{},z)};var d=c.aruku_interfaces.proto;const y=f.exports.createContext();function F(){const{GRPC_WEB_API_URL:e,setPublished:a,setKinematic:n,setWalking:l}=f.exports.useContext(y),o=new d.ConfigClient(e,null,null),i=new d.Empty,[s,_]=f.exports.useState(!1),g=()=>{_(!0),o.getConfig(i,{},(m,r)=>{m?console.log(`Unexpected error: code = ${m.code}, message = "${m.message}"`):(n(JSON.parse(r.array[0])),l(JSON.parse(r.array[1])))}),a(!1),_(!1)};return t.createElement(J,{onClick:g,color:"warning",variant:"contained",sx:{margin:1,top:5},loading:s},"Reload")}function K(){const{GRPC_WEB_API_URL:e,kinematic:a,walking:n}=f.exports.useContext(y),l=new d.ConfigClient(e,null,null),o=new d.ConfigWalking,[i,s]=f.exports.useState(!1),_=()=>{s(!0),o.setJsonKinematic(JSON.stringify(a)),o.setJsonWalking(JSON.stringify(n)),l.saveConfig(o,{},g=>{g&&console.log(`Unexpected error: code = ${g.code}, message = "${g.message}"`)}),s(!1)};return t.createElement(J,{onClick:_,color:"primary",variant:"contained",sx:{margin:1,top:5},loading:i},"Save")}const ge=x(S)(({theme:e})=>k(h({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary})),pe=x(w)(({theme:e})=>({textAlign:"left",padding:e.spacing(1)})),N=x(w)(({theme:e})=>({textAlign:"center",padding:e.spacing(1)}));function D({name:e,value:a,type:n}){const{setMainValue:l,setWalkingValue:o}=f.exports.useContext(y);return t.createElement(ge,null,t.createElement(u,{container:!0,spacing:1},t.createElement(u,{item:!0,xs:6},t.createElement(pe,null,e==="enable"?"AUTO_BALANCE":e.toUpperCase())),t.createElement(u,{item:!0,xs:!0},t.createElement(N,null," OFF ")),t.createElement(u,{item:!0,xs:!0},t.createElement(te,{onChange:n==="main"?i=>{l(e,i.target.checked)}:i=>{o("balance",e,i.target.checked)},checked:a})),t.createElement(u,{item:!0,xs:!0},t.createElement(N,null," ON "))))}const _e=x(S)(({theme:e})=>k(h({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary})),me=x(w)(({theme:e})=>({textAlign:"left",padding:e.spacing(1),fontSize:"0.9rem"}));function E(e){const{name:a,keys:n,value:l,type:o}=e,{setMainValue:i,setWalkingValue:s,setKinematicValue:_}=f.exports.useContext(y);function g(r){let p;if(o==="main")p=r*10,i(n,l+p);else if(o==="walking"){switch(a){case"balance":p=r/10;break;case"pid":p=r*10;break;default:p=r;break}s(a,n,l+p)}else{switch(a){case"offset":switch(n){case"x_offset":case"y_offset":case"z_offset":p=r*10;break;default:p=r;break}break;case"ratio":switch(n){case"foot_height":case"period_time":p=r*10;break;default:p=r/10;break}break;default:p=r;break}_(a,n,l+p)}}function m(r){o==="main"?i(n,r):o==="walking"?s(a,n,r):_(a,n,r)}return t.createElement(_e,null,t.createElement(u,{container:!0,spacing:1},t.createElement(u,{item:!0,xs:6},t.createElement(me,null,n.toUpperCase())),t.createElement(u,{item:!0,xs:1},t.createElement(R,{onClick:()=>g(-1)},t.createElement(ne,null))),t.createElement(u,{item:!0,xs:1},t.createElement(R,{onClick:()=>g(-.1)},t.createElement(ae,null))),t.createElement(u,{item:!0,xs:1.5},t.createElement(oe,{value:l,margin:"dense",type:"number",InputProps:{inputProps:{style:{textAlign:"center"}}},onChangeCapture:r=>{r.target.value===""?m(0):m(parseFloat(r.target.value))}})),t.createElement(u,{item:!0,xs:1},t.createElement(R,{onClick:()=>g(.1)},t.createElement(ie,null))),t.createElement(u,{item:!0,xs:1},t.createElement(R,{onClick:()=>g(1)},t.createElement(re,null)))))}function de(){const{GRPC_WEB_API_URL:e,main:a}=f.exports.useContext(y),n=new d.ConfigClient(e,null,null),l=new d.SetWalking,o=()=>{l.setRun(a.start),l.setXMove(a.x),l.setYMove(a.y),l.setAMove(a.a),l.setAimOn(a.aim),n.setMainConfig(l,{},(i,s)=>{console.log(i?`Unexpected error: code = ${i.code}, message = "${i.message}"`:s)})};return f.exports.useEffect(()=>{o()},[a]),t.createElement("div",null,Object.keys(a).map(i=>typeof a[i]=="boolean"?t.createElement(D,{name:i,value:a[i],type:"main"}):t.createElement(E,{keys:i,value:a[i],type:"main"})))}const $=x(S)(({theme:e})=>k(h({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}));function he(){const{GRPC_WEB_API_URL:e,walking:a,kinematic:n}=f.exports.useContext(y),l=()=>{const o=new d.ConfigClient(e,null,null),i=new d.ConfigWalking;i.setJsonKinematic(JSON.stringify(n)),i.setJsonWalking(JSON.stringify(a)),o.publishConfig(i,{},(s,_)=>{console.log(s?`Unexpected error: code = ${s.code}, message = "${s.message}"`:_)})};return f.exports.useEffect(()=>{l()},[a,n]),t.createElement(u,{container:!0,xs:12,md:10,lg:8},t.createElement(u,{item:!0,xs:12,md:10,lg:6,style:{marginTop:8}},t.createElement($,null,Object.keys(n.ratio).slice(1,12).map(o=>t.createElement(E,{name:"ratio",keys:o,value:n.ratio[o],type:"kinematic"})))),t.createElement(u,{item:!0,xs:12,md:10,lg:6,style:{marginTop:8}},t.createElement($,null,t.createElement(E,{name:"ratio",keys:"foot_accel_ratio",value:n.ratio.foot_accel_ratio,type:"kinematic"}),Object.keys(n.offset).map(o=>t.createElement(E,{name:"offset",keys:o,value:n.offset[o],type:"kinematic"})),Object.keys(a.odometry).map(o=>t.createElement(E,{name:"odometry",keys:o,value:a.odometry[o],type:"walking"})))))}const U=x(S)(({theme:e})=>k(h({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}));function ke(){const{GRPC_WEB_API_URL:e,published:a,walking:n,kinematic:l,setPublished:o,setKinematic:i,setWalking:s}=f.exports.useContext(y),_=new d.ConfigClient(e,null,null),g=new d.Empty,m=()=>{_.getConfig(g,{},(r,p)=>{r?console.log(`Unexpected error: code = ${r.code}, message = "${r.message}"`):(i(JSON.parse(p.array[0])),s(JSON.parse(p.array[1])))})};return f.exports.useEffect(()=>{a||(m(),o(!0))},[]),t.createElement(v,{sx:{flexGrow:1}},t.createElement(U,{onLoad:m},t.createElement(u,{container:!0,spacing:1},t.createElement(u,{item:!0,xs:12,md:8,lg:4},t.createElement(U,null,t.createElement(de,null),Object.keys(n.balance).map(r=>typeof n.balance[r]=="boolean"?t.createElement(D,{name:r,value:n.balance[r],type:"walking"}):t.createElement(E,{name:"balance",keys:r,value:n.balance[r],type:"walking"})),t.createElement(E,{name:"ratio",keys:"forward_hip_comp_ratio",value:l.ratio.forward_hip_comp_ratio,type:"kinematic"}))),t.createElement(he,null)),t.createElement(u,{container:!0,style:{justifyContent:"end"}},t.createElement(K,null),t.createElement(F,null))))}const G=x(S)(({theme:e})=>k(h({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}));function Ce(){const{GRPC_WEB_API_URL:e,kinematic:a,walking:n}=f.exports.useContext(y),l=()=>{const o=new d.ConfigClient(e,null,null),i=new d.ConfigWalking;i.setJsonKinematic(JSON.stringify(a)),i.setJsonWalking(JSON.stringify(n)),o.publishConfig(i,{},s=>{s&&console.log(`Unexpected error: code = ${s.code}, message = "${s.message}"`)})};return f.exports.useEffect(()=>{l()},[n]),t.createElement(u,{container:!0,spacing:2},t.createElement(u,{item:!0,xs:12,md:6},t.createElement(G,null,t.createElement(w,{variant:"h6",component:"div",sx:{padding:1}},"Left Foot"),Object.keys(n.init_angles).slice(0,9).map(o=>t.createElement(E,{name:"init_angles",keys:o,value:n.init_angles[o],type:"walking"})))),t.createElement(u,{item:!0,xs:12,md:6},t.createElement(G,null,t.createElement(w,{variant:"h6",component:"div",sx:{padding:1}},"Right Foot"),Object.keys(n.init_angles).slice(9,18).map(o=>t.createElement(E,{name:"init_angles",keys:o,value:n.init_angles[o],type:"walking"})))))}x(S)(({theme:e})=>k(h({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff"},e.typography.body2),{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}));function ye(){const{GRPC_WEB_API_URL:e,published:a,setPublished:n,setKinematic:l,setWalking:o}=f.exports.useContext(y),i=new d.ConfigClient(e,null,null),s=new d.Empty,_=()=>{i.getConfig(s,{},(g,m)=>{g?console.log(`Unexpected error: code = ${g.code}, message = "${g.message}"`):(l(JSON.parse(m.array[0])),o(JSON.parse(m.array[1])))})};return f.exports.useEffect(()=>{a||(_(),n(!0))},[]),t.createElement(v,{sx:{flexGrow:1}},t.createElement(Ce,null),t.createElement(u,{container:!0,style:{justifyContent:"end"}},t.createElement(K,null),t.createElement(F,null)))}function Ee(){const e={}.VITE_GRPC_WEB_API_URL,[a,n]=f.exports.useState(!1),[l,o]=f.exports.useState({start:!1,x:0,y:0,a:0,aim:!1}),[i,s]=f.exports.useState({ratio:{forward_hip_comp_ratio:0,dsp_comp_ratio:0,period_time:0,swing_right_left:0,dsp_ratio:0,period_comp_ratio:0,swing_up_down:0,arm_swing_gain:0,backward_hip_comp_ratio:0,foot_comp_ratio:0,foot_height:0,move_accel_ratio:0,foot_accel_ratio:0},offset:{y_offset:0,roll_offset:0,hip_pitch_offset:0,pitch_offset:0,yaw_offset:0,z_offset:0,x_offset:0},length:{leg_length:0,thigh_length:0,calf_length:0,ankle_length:0}}),[_,g]=f.exports.useState({balance:{enable:!1,balance_knee_gain:0,balance_ankle_pitch_gain:0,balance_hip_roll_gain:0,balance_ankle_roll_gain:0},pid:{p_gain:10,i_gain:2,d_gain:3},odometry:{ry_coefficient:0,fx_coefficient:0,ly_coefficient:0},init_angles:{left_shoulder_pitch:0,left_shoulder_roll:0,left_elbow:0,left_hip_yaw:0,left_hip_roll:0,left_hip_pitch:0,left_knee:0,left_ankle_roll:0,left_ankle_pitch:0,right_shoulder_pitch:0,right_shoulder_roll:0,right_elbow:0,right_hip_yaw:0,right_hip_roll:0,right_hip_pitch:0,right_knee:0,right_ankle_roll:0,right_ankle_pitch:0},angles_direction:{left_shoulder_pitch:-1,left_shoulder_roll:-1,left_elbow:-1,right_shoulder_pitch:1,right_shoulder_roll:1,right_elbow:1,left_hip_yaw:-1,left_hip_roll:-1,left_hip_pitch:-1,left_knee:-1,left_ankle_roll:1,left_ankle_pitch:1,right_hip_yaw:-1,right_hip_roll:-1,right_hip_pitch:1,right_knee:1,right_ankle_roll:1,right_ankle_pitch:-1},length:{thigh_length:0,calf_length:0,ankle_length:0,leg_length:0}}),m=(b,A)=>{o(P=>k(h({},P),{[b]:A}))},r=(b,A,P)=>{g(W=>k(h({},W),{[b]:k(h({},W[b]),{[A]:P})}))},p=(b,A,P)=>{s(W=>k(h({},W),{[b]:k(h({},W[b]),{[A]:P})}))};return t.createElement(y.Provider,{value:{GRPC_WEB_API_URL:e,published:a,main:l,walking:_,kinematic:i,setPublished:n,setKinematic:s,setMain:o,setWalking:g,setMainValue:m,setWalkingValue:r,setKinematicValue:p}},t.createElement(le,null,t.createElement(fe,null),t.createElement(se,null,t.createElement(L,{path:"/",element:t.createElement(ke,null)}),t.createElement(L,{path:"/init",element:t.createElement(ye,null)}))))}ce.render(t.createElement(t.StrictMode,null,t.createElement(Ee,null)),document.getElementById("root"));
