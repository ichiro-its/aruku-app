var M=Object.defineProperty,z=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var W=(t,n,l)=>n in t?M(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l,d=(t,n)=>{for(var l in n||(n={}))U.call(n,l)&&W(t,l,n[l]);if($)for(var l of $(n))q.call(n,l)&&W(t,l,n[l]);return t},_=(t,n)=>z(t,D(n));import{R as e,B as A,A as H,T as Q,a as x,b as O,N as F,r as f,u as j,c as b,d as w,C as J,s as h,P as v,G as m,S as X,I as S,e as Y,f as Z,g as ee,h as te,i as ne,j as P,k as N,l as C,L as ae,m as le,n as ie,o as re,p as ce,q as oe,t as se,v as I,w as ue}from"./vendor.bcaaf62b.js";const ge=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function l(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerpolicy&&(i.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?i.credentials="include":c.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(c){if(c.ep)return;c.ep=!0;const i=l(c);fetch(c.href,i)}};ge();function me(){return e.createElement(A,{sx:{flexGrow:1}},e.createElement(H,{position:"static"},e.createElement(Q,null,e.createElement(x,{variant:"h6",component:"div",sx:{flexGrow:1}},"Aruku App"),e.createElement(O,{component:F,to:"/",style:({isActive:t})=>({fontWeight:t?900:"normal"}),color:"inherit"},"Walk Settings"),e.createElement(O,{component:F,to:"/init",style:({isActive:t})=>({fontWeight:t?900:"normal"}),color:"inherit"},"Init Settings"))))}const y=f.exports.createContext();function R(){const{setKinematicValue:t,setWalkingValue:n}=f.exports.useContext(y),l=j(),s=b(),[c,i]=w(()=>l.call({}).then(a=>{s.success("Successfully get config.");const g=JSON.parse(`${a.json_kinematic.replace("/\\/g","")}`),r=JSON.parse(`${a.json_walking.replace("/\\/g","")}`);Object.keys(g).map(u=>Object.keys(g[u]).map(o=>t(u,o,g[u][o]))),Object.keys(r).map(u=>Object.keys(r[u]).map(o=>n(u,o,r[u][o])))}).catch(a=>{s.error(`Failed to load config! ${a.message}.`)}),500);return f.exports.useEffect(()=>{i()},[]),e.createElement(O,{onClick:i,disabled:l==null||c,color:"warning",variant:"contained",sx:{margin:1,top:5}},c?e.createElement(J,{size:24}):"Reload")}function G(){const{kinematic:t,walking:n}=f.exports.useContext(y),l=j(),s=b(),[c,i]=w(()=>{const a=JSON.stringify(t),g=JSON.stringify(n);return l.call({json_kinematic:a,json_walking:g}).then(r=>{s.success(`Successfully save config with status ${r.status}.`)}).catch(r=>{s.error(`Failed to save config! ${r.message}.`)})},500);return e.createElement(O,{onClick:i,disabled:l==null||c,color:"primary",variant:"contained",sx:{margin:1,top:5}},c?e.createElement(J,{size:24}):"Save")}const pe=h(v)(({theme:t})=>_(d({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff"},t.typography.body2),{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})),fe=h(x)(({theme:t})=>({textAlign:"left",padding:t.spacing(1)})),T=h(x)(({theme:t})=>({textAlign:"center",padding:t.spacing(1)}));function K({name:t,value:n,type:l}){const{main:s,kinematic:c,walking:i,setMainValue:a,setWalkingValue:g}=f.exports.useContext(y);return e.createElement(pe,null,e.createElement(m,{container:!0,spacing:1},e.createElement(m,{item:!0,xs:6},e.createElement(fe,null,t==="enable"?"AUTO_BALANCE":t.toUpperCase())),e.createElement(m,{item:!0,xs:!0},e.createElement(T,null," OFF ")),e.createElement(m,{item:!0,xs:!0},e.createElement(X,{onChange:l==="main"?r=>{a(t,r.target.checked)}:r=>{g("balance",t,r.target.checked)},checked:n})),e.createElement(m,{item:!0,xs:!0},e.createElement(T,null," ON "))))}const de=h(v)(({theme:t})=>_(d({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff"},t.typography.body2),{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})),_e=h(x)(({theme:t})=>({textAlign:"left",padding:t.spacing(1),fontSize:"0.9rem"}));h(x)(({theme:t})=>({textAlign:"center",padding:t.spacing(1),fontSize:"0.9rem"}));function E(t){const{name:n,keys:l,value:s,type:c}=t,{setMainValue:i,setWalkingValue:a,setKinematicValue:g}=f.exports.useContext(y);function r(o){c==="main"?i(l,s+o):c==="walking"?a(n,l,s+o):g(n,l,s+o)}function u(o){c==="main"?i(l,o):c==="walking"?a(n,l,o):g(n,l,o)}return e.createElement(de,null,e.createElement(m,{container:!0,spacing:1},e.createElement(m,{item:!0,xs:6},e.createElement(_e,null,l.toUpperCase())),e.createElement(m,{item:!0,xs:1},e.createElement(S,{onClick:()=>r(-10)},e.createElement(Y,null))),e.createElement(m,{item:!0,xs:1},e.createElement(S,{onClick:()=>r(-1)},e.createElement(Z,null))),e.createElement(m,{item:!0,xs:1.5},e.createElement(ee,{value:s,margin:"dense",type:"number",InputProps:{inputProps:{style:{textAlign:"center"}}},onChangeCapture:o=>{o.target.value===""?u(0):u(parseFloat(o.target.value))}})),e.createElement(m,{item:!0,xs:1},e.createElement(S,{onClick:()=>r(1)},e.createElement(te,null))),e.createElement(m,{item:!0,xs:1},e.createElement(S,{onClick:()=>r(10)},e.createElement(ne,null)))))}h(v)(({theme:t})=>_(d({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff"},t.typography.body2),{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}));function ke(){const{main:t}=f.exports.useContext(y),n=P(),l=b(),[s,c]=w(()=>{const i=t.start,a=t.x,g=t.y,r=t.a,u=t.aim;return n.publish({run:i,x_move:a,y_move:g,a_move:r,aim_on:u}).then(()=>{l.success("Successfully publish main config.")}).catch(o=>{l.error(`Failed to publish main config! ${o.message}.`)})},500);return f.exports.useEffect(()=>{c()},[t]),e.createElement("div",null,Object.keys(t).map(i=>typeof t[i]=="boolean"?e.createElement(K,{name:i,value:t[i],type:"main"}):e.createElement(E,{keys:i,value:t[i],type:"main"})))}const V=h(v)(({theme:t})=>_(d({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff"},t.typography.body2),{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}));function he(){const{walking:t,kinematic:n}=f.exports.useContext(y),l=P(),s=b(),[c,i]=w(()=>{const a=JSON.stringify(n),g=JSON.stringify(t);return l.publish({json_kinematic:a,json_walking:g}).then(()=>{s.success("Successfully publish kinematic and walking config.")}).catch(r=>{s.error(`Failed to publish kinematic and walking config! ${r.message}.`)})},500);return f.exports.useEffect(()=>{i()},[n,t]),e.createElement(m,{container:!0,xs:12,md:10,lg:8},e.createElement(m,{item:!0,xs:12,md:10,lg:6,style:{marginTop:8}},e.createElement(V,null,Object.keys(n.ratio).slice(1,12).map(a=>e.createElement(E,{name:"ratio",keys:a,value:n.ratio[a],type:"kinematic"})))),e.createElement(m,{item:!0,xs:12,md:10,lg:6,style:{marginTop:8}},e.createElement(V,null,e.createElement(E,{name:"ratio",keys:"foot_accel_ratio",value:n.ratio.foot_accel_ratio,type:"kinematic"}),Object.keys(n.offset).map(a=>e.createElement(E,{name:"offset",keys:a,value:n.offset[a],type:"kinematic"})),Object.keys(t.odometry).map(a=>e.createElement(E,{name:"odometry",keys:a,value:t.odometry[a],type:"walking"})))))}const L=h(v)(({theme:t})=>_(d({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff"},t.typography.body2),{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}));function ye(){const{walking:t,kinematic:n,setKinematicValue:l,setWalkingValue:s}=f.exports.useContext(y),c=j(),i=b(),[a,g]=w(()=>c.call({}).then(r=>{i.success("Successfully get config.");const u=JSON.parse(`${r.json_kinematic.replace("/\\/g","")}`),o=JSON.parse(`${r.json_walking.replace("/\\/g","")}`);Object.keys(u).map(p=>Object.keys(u[p]).map(k=>l(p,k,u[p][k]))),Object.keys(o).map(p=>Object.keys(o[p]).map(k=>s(p,k,o[p][k])))}).catch(r=>{i.error(`Failed to load config! ${r.message}.`)}),500);return f.exports.useEffect(()=>{g()},[]),e.createElement(A,{sx:{flexGrow:1}},e.createElement(L,{onLoad:g},e.createElement(m,{container:!0,spacing:1},e.createElement(m,{item:!0,xs:12,md:8,lg:4},e.createElement(L,null,e.createElement(N,{messageType:"aruku_interfaces/msg/SetWalking",topicName:"/walking/set_walking"},e.createElement(ke,null)),Object.keys(t.balance).map(r=>typeof t.balance[r]=="boolean"?e.createElement(K,{name:r,value:t.balance[r],type:"walking"}):e.createElement(E,{name:"balance",keys:r,value:t.balance[r],type:"walking"})),e.createElement(E,{name:"ratio",keys:"forward_hip_comp_ratio",value:n.ratio.forward_hip_comp_ratio,type:"kinematic"}))),e.createElement(N,{messageType:"aruku_interfaces/msg/SetConfig",topicName:"/aruku/config/set_config"},e.createElement(he,null))),e.createElement(m,{container:!0,style:{justifyContent:"end"}},e.createElement(C,{serviceType:"aruku_interfaces/srv/SaveConfig",serviceName:"/aruku/config/save_config"},e.createElement(G,null)),e.createElement(C,{serviceType:"aruku_interfaces/srv/GetConfig",serviceName:"/aruku/config/get_config"},e.createElement(R,null)))))}const B=h(v)(({theme:t})=>_(d({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff"},t.typography.body2),{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}));function Ee(){const{walking:t,kinematic:n}=f.exports.useContext(y),l=P(),s=b(),[c,i]=w(()=>{const a=JSON.stringify(n),g=JSON.stringify(t);return l.publish({json_kinematic:a,json_walking:g}).then(()=>{s.success("Successfully publish kinematic and walking config.")}).catch(r=>{s.error(`Failed to publish kinematic and walking config! ${r.message}.`)})},500);return f.exports.useEffect(()=>{i()},[t]),e.createElement(m,{container:!0,spacing:2},e.createElement(m,{item:!0,xs:12,md:6},e.createElement(B,null,e.createElement(x,{variant:"h6",component:"div",sx:{padding:1}},"Left Foot"),Object.keys(t.init_angles).slice(0,9).map(a=>e.createElement(E,{name:"init_angles",keys:a,value:t.init_angles[a],type:"walking"})))),e.createElement(m,{item:!0,xs:12,md:6},e.createElement(B,null,e.createElement(x,{variant:"h6",component:"div",sx:{padding:1}},"Right Foot"),Object.keys(t.init_angles).slice(9,18).map(a=>e.createElement(E,{name:"init_angles",keys:a,value:t.init_angles[a],type:"walking"})))))}const xe=h(v)(({theme:t})=>_(d({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff"},t.typography.body2),{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}));function be(){const{walking:t,setKinematicValue:n,setWalkingValue:l}=f.exports.useContext(y),s=j(),c=b(),[i,a]=w(()=>s.call({}).then(g=>{c.success("Successfully get config.");const r=JSON.parse(`${g.json_kinematic.replace("/\\/g","")}`),u=JSON.parse(`${g.json_walking.replace("/\\/g","")}`);Object.keys(r).map(o=>Object.keys(r[o]).map(p=>n(o,p,r[o][p]))),Object.keys(u).map(o=>Object.keys(u[o]).map(p=>l(o,p,u[o][p])))}).catch(g=>{c.error(`Failed to load config! ${g.message}.`)}),500);return f.exports.useEffect(()=>{a()},[]),e.createElement(A,{sx:{flexGrow:1}},e.createElement(xe,{onLoad:a},e.createElement(N,{messageType:"aruku_interfaces/msg/SetConfig",topicName:"/aruku/config/set_config"},e.createElement(Ee,null)),e.createElement(m,{container:!0,style:{justifyContent:"end"}},e.createElement(C,{serviceType:"aruku_interfaces/srv/SaveConfig",serviceName:"/aruku/config/save_config"},e.createElement(G,null)),e.createElement(C,{serviceType:"aruku_interfaces/srv/GetConfig",serviceName:"/aruku/config/get_config"},e.createElement(R,null)))))}function we(){const[t,n]=f.exports.useState({start:!1,x:0,y:0,a:0,aim:!1}),[l,s]=f.exports.useState({ratio:{forward_hip_comp_ratio:0,dsp_comp_ratio:0,period_time:0,swing_right_left:0,dsp_ratio:0,period_comp_ratio:0,swing_up_down:0,arm_swing_gain:0,backward_hip_comp_ratio:0,foot_comp_ratio:0,foot_height:0,move_accel_ratio:0,foot_accel_ratio:0},offset:{y_offset:0,roll_offset:0,hip_pitch_offset:0,pitch_offset:0,yaw_offset:0,z_offset:0,x_offset:0},length:{thigh_length:134,calf_length:112,ankle_length:34,leg_length:280}}),[c,i]=f.exports.useState({balance:{enable:!1,balance_knee_gain:0,balance_ankle_pitch_gain:0,balance_hip_roll_gain:0,balance_ankle_roll_gain:0},pid:{p_gain:10,i_gain:2,d_gain:3},odometry:{ry_coefficient:0,fx_coefficient:0,ly_coefficient:0},init_angles:{left_shoulder_pitch:0,left_shoulder_roll:0,left_elbow:0,left_hip_yaw:0,left_hip_roll:0,left_hip_pitch:0,left_knee:0,left_ankle_roll:0,left_ankle_pitch:0,right_shoulder_pitch:0,right_shoulder_roll:0,right_elbow:0,right_hip_yaw:0,right_hip_roll:0,right_hip_pitch:0,right_knee:0,right_ankle_roll:0,right_ankle_pitch:0},angles_direction:{left_shoulder_pitch:-1,left_shoulder_roll:-1,left_elbow:-1,right_shoulder_pitch:1,right_shoulder_roll:1,right_elbow:1,left_hip_yaw:-1,left_hip_roll:-1,left_hip_pitch:-1,left_knee:-1,left_ankle_roll:1,left_ankle_pitch:1,right_hip_yaw:-1,right_hip_roll:-1,right_hip_pitch:1,right_knee:1,right_ankle_roll:1,right_ankle_pitch:-1}}),a=(u,o)=>{n(p=>_(d({},p),{[u]:o}))},g=(u,o,p)=>{i(k=>_(d({},k),{[u]:_(d({},k[u]),{[o]:p})}))},r=(u,o,p)=>{s(k=>_(d({},k),{[u]:_(d({},k[u]),{[o]:p})}))};return e.createElement(y.Provider,{value:{main:t,walking:c,kinematic:l,setKinematic:s,setMain:n,setWalking:i,setMainValue:a,setWalkingValue:g,setKinematicValue:r}},e.createElement(ae,null,e.createElement(le,null,e.createElement(ie,null),e.createElement(re,null,e.createElement(ce,{nodeName:"aruku_app"},e.createElement(C,{serviceType:"aruku_interfaces/srv/GetConfig",serviceName:"/aruku/config/get_config"},e.createElement(oe,null,e.createElement(me,null),e.createElement(se,null,e.createElement(I,{path:"/",element:e.createElement(ye,null)}),e.createElement(I,{path:"/init",element:e.createElement(be,null)})))))))))}ue.render(e.createElement(e.StrictMode,null,e.createElement(we,null)),document.getElementById("root"));
